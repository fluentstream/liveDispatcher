<html>
	<head>
		<!-- // <script src="lib/socket.io.js"></script> -->
		<script src="https://cdn.socket.io/socket.io-1.3.4.js"></script>
		<script src="config/config.js"></script>
		<script src="liveDispatcher.js"></script>
		<script src="callDispatcher.js"></script>
		<script src="zendeskDispatcher.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js">
			</script>

		<script>

			function init(event){
				console.log("Got Init Event: " , event);
			}

			function events(event){
				console.log("Got Regular Event: ", event);
			}
			function ringHandler(event){
				console.log("Got ringing event: ", event)
			}
			function connectHandler(event){
				console.log("Got connect event: ", event)
			}
			function hangUpHandler(event){
				console.log("Got hangup event: ", event)
			}
			function handleAgentRinging(event) {
				console.log("Got agent ringing event: ", event)
			}
			function customerCreationErrorHandler(event) {
				console.log("Got customer creation error event: ", event)
			}
			function callCompleteHandler(event) {
				console.log("Got call complete event: ", event)
			}
			function agentConnectHandler(event) {
				console.log("Got agent connect event: ", event)
			}


			/**
			 * Here is an explaination of the possible options
			 * [tenant]: This is the company name for each different account.  In our system
			 *	Each franchise is a different "tenant name" this will have to be set to the 
			 * 	specific site.
			 * [eventScope]: This will determine if the user is going to get all tenant events
			 *	or just their own. Set this to "tenant" for all "extension" for individual
			 * [config]: This is the configuration from config.js, should not change in most cases
			 * [initHandler]: This is the function to handle all "initial events", many times when
			 * 	you "start" the program there will be people on the phone or events happening,
			 *	this function is how you will handle initilization of those events
			 * [ringHandler]: When a phone starts ringing this is the event that will be fired
			 * [connectHandler]: When a user "answers" the phone this is the event that is fired
			 * [hangUpHandler]: When a user hangs up the phone this is the event that is fired
			 * [apikey]: This is the specific key assigned to THIS tenant. They must match, if 
			 *	you need an api key please conact support to get one issued for the tenant.
			 */
			var options = {
				tenant:"Yahweh",
				eventScope:"tenant",
				extension:"814",
				config:config,
				initHandler:init,
				ringHandler: ringHandler,
				connectHandler: connectHandler,
				hangUpHandler: hangUpHandler,
				apikey:'WSokI92B-Fki2-tYop-u7MxmxmNw72i',
				username:"jkatzyw",
				password:"julian12341",
				room:"Yahweh",
				zendeskUsername:"testZDName",
				zendeskAuth:"testZDAuth",
			    zendeskSubdomain:"testZDSubdomain",
		        agentRingHandler:handleAgentRinging, 
		        customerCreationErrorHandler:customerCreationErrorHandler, 
		        callCompleteHandler:callCompleteHandler, 
		        agentConnectHandler:agentConnectHandler
			};

			// var dispatcher = new CallDispatcher(options);
			var dispatcher = new ZendeskDispatcher(options);
	
			dispatcher.run();

		</script>
	</head>

	<body>

		<p>Testing Dispatcher</p>
	</body>
</html>