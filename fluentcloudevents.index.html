<html>
    <head>
        <!-- // <script src="lib/socket.io.js"></script> -->
        <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
        <script src="config/config.js"></script>
        <script src="liveDispatcher.js"></script>
        <script src="callDispatcher.js"></script>
        <script src="zendeskDispatcher.js"></script>
        <script src="freshdeskDispatcher.js"></script>
        <script src="phoneStatusDispatcher.js"></script>
        <script src="smsDispatcher.js"></script>
        <script src="autoAttendantDispatcher.js"></script>
        <script src="fluentcloudEventsDispatcher.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js">
            </script>

        <script>

            /*These functions correspond to Socket Events, and thus belong to the parent*/
            function connectEventHandler(event) {
                console.log("Got socket connect event: ", event)
            }
            function reconnectEventHandler(event) {
                console.log("Got socket reconnect event: ", event)
            }
            function reconnectingEventHandler(event) {
                console.log("Got socket reconnecting event. Attempt number ", event)
            }
            function reconnectAttemptEventHandler(event) {
                console.log("Got socket reconnect attempt event.  Attempt number ", event)
            }
            function reconnectErrorEventHandler(event) {
                console.log("Got socket reconnect error event: ", event)
            }
            function reconnectFailedEventHandler(event) {
                console.log("Got socket reconnect failed event")
            }

            function newInboundCallHandler(data, call){
                console.log("Got new inbound call data: ", data, call);
            }

            function newOutboundCallHandler(data, call){
                console.log("Got new outbound call data: ", data, call);
            }

            function outboundExternalCallInfoHandler(data, call){
                console.log("Got new outbound call info data: ", data, call);
            }

            function inboundCallInfoHandler(data, call){
                console.log("Got new inbound call info data: ", data, call);
            }

            function runningApplicationHandler(data, call){
                console.log("Got new running application data: ", data, call);
            }

            
            function dialBeginHandler(data, call){
                console.log("Got dialBegin data: ", data, call);
            }

            function dialEndHandler(data, call){
                console.log("Got dialEnd data: ", data, call);
            }

            function dialStateHandler(data, call){
                console.log("Got dialState data: ", data, call);
            }

            function hangupHandler(data, call){
                console.log("Got hangup data: ", data, call);
            }

            function newContactHandler(data, contact){
                console.log("Got newContact data: ", data, contact);
            }

            function updateContactHandler(data, contact){
                console.log("Got updateContact data: ", data, contact);
            }

            function dialBeginContactHandler(data, contact){
                console.log("Got dialBeginContact data: ", data, contact);
            }

            function dialEndContactHandler(data, contact){
                console.log("Got dialEndContact data: ", data, contact);
            }

            function bridgeCreateHandler(data, bridge){
                console.log("Got bridgeCreate data: ", data, bridge);
            }

            function bridgeEnterHandler(data, bridge){
                console.log("Got bridgeEnter data: ", data, bridge);
            }

            function bridgeLeaveHandler(data, bridge){
                console.log("Got bridgeLeave data: ", data, bridge);
            }

            function bridgeDestroyHandler(data, bridge){
                console.log("Got bridgeDestroy data: ", data, bridge);
            }

            function newDeviceHandler(data, device){
                console.log("Got newDevice data: ", data, device);
            }

            function updateDeviceHandler(data, device){
                console.log("Got updateDevice data: ", data, device);
            }

            /*These functions are for the Call Dispatcher*/
            // function keypressHandler(event) {
            //     console.log("Got keypress event: ", event);
            // }

            var options = {
                tenant:"Nagios",
                eventScope:"tenant",
                extension:"1001",
                config:config,
                connectEventHandler:connectEventHandler,
                reconnectEventHandler:reconnectEventHandler,
                reconnectingEventHandler:reconnectingEventHandler,
                reconnectAttemptEventHandler:reconnectAttemptEventHandler,
                reconnectErrorEventHandler:reconnectErrorEventHandler,
                reconnectFailedEventHandler:reconnectFailedEventHandler,
                newInboundCallHandler:newInboundCallHandler,
                newOutboundCallHandler:newOutboundCallHandler,
                outboundExternalCallInfoHandler:outboundExternalCallInfoHandler,
                inboundCallInfoHandler:inboundCallInfoHandler,
                runningApplicationHandler:runningApplicationHandler,
                dialBeginHandler:dialBeginHandler,
                dialEndHandler:dialEndHandler,
                dialStateHandler:dialStateHandler,
                newContactHandler:newContactHandler,
                updateContactHandler:updateContactHandler,
                dialBeginContactHandler:dialBeginContactHandler,
                dialEndContactHandler:dialEndContactHandler,
                bridgeCreateHandler:bridgeCreateHandler,
                bridgeEnterHandler:bridgeEnterHandler,
                bridgeLeaveHandler:bridgeLeaveHandler,
                bridgeDestroyHandler:bridgeDestroyHandler,
                hangupHandler:hangupHandler,
                newDeviceHandler:newDeviceHandler,
                updateDeviceHandler:updateDeviceHandler,
                // keypressHandler:keypressHandler,
                apikey:'11111111-1111-1111-111111111111',
                // apikey:'WSokI92B-Fki2-tYop-u7MxmxmNw72i',
                username:"",
                password:"",
                // room:"Snow/media/agents/1001"
                room:"Nagios/media/calls"
            };

            var dispatcher = new FluentcloudEventsDispatcher(options);

            dispatcher.run();

            document.addEventListener("DOMContentLoaded", function() {
                document.getElementById("getcalls").onclick = function() {
                    dispatcher.getCalls({tenant:"Yahweh"});
                };
            });

            document.addEventListener("DOMContentLoaded", function() {
                document.getElementById("getQueues").onclick = function() {
                    dispatcher.getQueues();
                };
            });

            document.addEventListener("DOMContentLoaded", function() {
                document.getElementById("sendNagiosInboundCall").onclick = function() {
                    dispatcher.sendNagiosInboundCall();
                };
            });

        </script>
    </head>

    <body>
        <p>Testing FluentCloud Events Dispatcher</p>
    </body>

    <button type="button" id="getcalls">Get Calls</button>
    <button type="button" id="getQueues">Get Queues</button>
    <button type="button" id="sendNagiosInboundCall">Send Nagios Call</button>

</html>